post_text_init=false;post_image_init=false;post_video_init=false;post_link_init=false;last_image_url="";last_video_url="";$(document).ready(function(){Wix.Settings.refreshApp();expandPostText();$(".accordion").accordion({header:".box > h3",heightStyle:"content",activate:function(b,c){$(".post-area").mCustomScrollbar("update");$(".recent-posts").mCustomScrollbar("update")}});$(".page").mCustomScrollbar({scrollInertia:0,mouseWheelPixels:50,advanced:{updateOnContentResize:true,autoScrollOnFocus:false}});var a=new Settings();a.configureColorPicker("#Settings_feedBgColor, #Settings_postsBgColor, #Settings_borderColor, #Settings_textColor, #Settings_linksColor, #Settings_titleColor, #Settings_tagsFontColor, #Settings_dateFontColor, #Settings_paginationFontColor, #Settings_btfFontColor, #Settings_dbtFontColor, #Settings_sidebarDividerColor, #Settings_sidebarTitleFontColor, #Settings_sidebarRecentPostsFontColor, #Settings_sidebarTagsFontColor, #Settings_readMoreFontColor");a.configureSlider($("#gridColumns_slider"),$("#Settings_gridColumns"),{range:"min",min:1,max:4});a.configureSlider($("#gridRows_slider"),$("#Settings_gridRows"),{range:"min",min:1,max:20});a.configureSlider($("#pinterestColumns_slider"),$("#Settings_pinterestColumns"),{range:"min",min:1,max:4});a.configureSlider($("#pinterestRows_slider"),$("#Settings_pinterestRows"),{range:"min",min:1,max:20});a.configureSlider($("#lastPostsCount_slider"),$("#Settings_lastPostsCount"),{range:"min",min:1,max:20});a.configureSlider($("#borderThickness_slider"),$("#Settings_borderThickness"),{range:"min",min:0,max:5});a.configureSlider($("#textFontSize_slider"),$("#Settings_textFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#linksFontSize_slider"),$("#Settings_linksFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#titleFontSize_slider"),$("#Settings_titleFontSize"),{range:"min",min:8,max:50});a.configureSlider($("#tagsFontSize_slider"),$("#Settings_tagsFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#dateFontSize_slider"),$("#Settings_dateFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#paginationFontSize_slider"),$("#Settings_paginationFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#btfFontSize_slider"),$("#Settings_btfFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#dbtFontSize_slider"),$("#Settings_dbtFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#textSingleFontSize_slider"),$("#Settings_textSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#linksSingleFontSize_slider"),$("#Settings_linksSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#titleSingleFontSize_slider"),$("#Settings_titleSingleFontSize"),{range:"min",min:8,max:50});a.configureSlider($("#tagsSingleFontSize_slider"),$("#Settings_tagsSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#dateSingleFontSize_slider"),$("#Settings_dateSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#paginationSingleFontSize_slider"),$("#Settings_paginationSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#btfSingleFontSize_slider"),$("#Settings_btfSingleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#paginationNumbersCount_slider"),$("#Settings_paginationNumbersCount"),{range:"min",min:3,max:15,step:2});a.configureSlider($("#sidebarDividerThicknes_slider"),$("#Settings_sidebarDividerThicknes"),{range:"min",min:1,max:10});a.configureSlider($("#recentPostsCount_slider"),$("#Settings_recentPostsCount"),{range:"min",min:1,max:10});a.configureSlider($("#sidebarTitleFontSize_slider"),$("#Settings_sidebarTitleFontSize"),{range:"min",min:8,max:30});a.configureSlider($("#sidebarRecentPostsFontSize_slider"),$("#Settings_sidebarRecentPostsFontSize"),{range:"min",min:8,max:20});a.configureSlider($("#sidebarTagsFontSize_slider"),$("#Settings_sidebarTagsFontSize"),{range:"min",min:8,max:20});a.configureSlider($("#readMoreFontSize_slider"),$("#Settings_readMoreFontSize"),{range:"min",min:8,max:20});a.configureSlider($("#mobilePostsCount_slider"),$("#Settings_mobilePostsCount"),{range:"min",min:1,max:7,step:1});a.configureOpacitySlider($("#feedBgOpacityValue_slider"),$("#Settings_feedBgOpacityValue"));a.configureOpacitySlider($("#postsBgOpacityValue_slider"),$("#Settings_postsBgOpacityValue"));a.configureOpacitySlider($("#sidebarDividerColorOpacityValue_slider"),$("#Settings_sidebarDividerColorOpacityValue"));a.bindCheckboxWithSlider($("#Settings_feedBgOpacity"),$("#feedBgOpacityValue_slider"));a.bindCheckboxWithSlider($("#Settings_postsBgOpacity"),$("#postsBgOpacityValue_slider"));a.bindCheckboxWithSlider($("#Settings_paginationShowNumbers"),$("#paginationNumbersCount_slider"));a.bindCheckboxWithSlider($("#Settings_sidebarDividerColorOpacity"),$("#sidebarDividerColorOpacityValue_slider"));$("#options_form").on("submit",function(){a.submitForm();return false});$("#options_form").delegate("input,select,textarea","change",function(){$("#options_form").submit()});$("form input:radio").on("click",a.switchLayouts);initializeManagePosts($(".recent-posts"));$(".js-post-text-action").click(function(b){b.preventDefault();collapseAll(".post-text",expandPostText);$(this).closest("p").find("*").removeClass("active");$(this).addClass("active")});$(".js-post-image-action").click(function(b){b.preventDefault();collapseAll(".post-image",expandPostImage);$(this).closest("p").find("*").removeClass("active");$(this).addClass("active")});$(".js-post-video-action").click(function(b){b.preventDefault();collapseAll(".post-video",expandPostVideo);$(this).closest("p").find("*").removeClass("active");$(this).addClass("active")});$(".js-post-link-action").click(function(b){b.preventDefault();collapseAll(".post-link",expandPostLink);$(this).closest("p").find("*").removeClass("active");$(this).addClass("active")});$(".tile").hover(function(){$(this).find(".foreground").stop().animate({"margin-top":"-80%"},"fast")},function(){$(this).find(".foreground").stop().animate({"margin-top":"10%"},"fast")});a.init()});function invokeCallback(a){if(typeof(a)!="undefined"&&a){a()}}function collapseAll(a,b){$(".post-area form").parent().not(".hidden").not(a).addClass("hidden");$(".iconbutton").removeClass("active");invokeCallback(b)}function clearForm(a){a.find("*[name=id]").val("").change();a.find("*[name=title]").val("").change();a.find("*[name=url]").val("").change();CKEDITOR.instances[a.find("*[name=content]").attr("id")].setData("");a.find("*[name=tags]").importTags("")}function initliazePostTextForm(b,a){var d=b.find("textarea");d.attr("id",d.attr("id")+Date.now());inicializeEditor(d.attr("id"));var c=b.find("input[name=tags]");c.tagsInput(tagsInputOptions);c.importTags(c.val());if(typeof(initliazePostTextFormPremium)=="function"){initliazePostTextFormPremium(b)}b.find(".js-post-text-cancel").click(function(){a(b)});b.find("*[type=submit]").click(function(){$(this).parents("form").find("*[type=submit]").removeAttr("clicked");$(this).attr("clicked","true")});b.validate({rules:{title:{required:true,maxlength:255}}});initializeDatePicker(b)}function expandPostText(){if(!post_text_init){initliazePostTextForm($(".post-text form"),cleanPostTextForm);post_text_init=true}$(".post-text").removeClass("hidden");$(".iconbutton.text").addClass("active")}function cleanPostTextForm(a){if(typeof(a)=="undefined"){a=$(".post-text form")}clearForm(a)}function initliazePostImageForm(b,a){var d=b.find("textarea");d.attr("id",d.attr("id")+Date.now());inicializeEditor(d.attr("id"));var c=b.find("input[name=tags]");c.tagsInput(tagsInputOptions);if(typeof(initliazePostImageFormPremium)=="function"){initliazePostImageFormPremium(b)}b.find(".js-image-gallery").click(function(){Wix.Settings.openMediaDialog(Wix.Settings.MediaType.IMAGE,false,function(e){b.find("input[name=url]").val(Wix.Utils.Media.getImageUrl(e.relativeUri)).change()})});b.find(".image-source").load(function(){$(this).parent().removeClass("hidden")});b.find("input[name=url]").on("change keyup paste",function(){var e=$(this).val();if(e!=last_image_url){b.find(".image-source").attr("src",e).parent().addClass("hidden")}last_image_url=e});if(b.find("input[name=url]").val()!=""){last_image_url="";b.find("input[name=url]").change()}b.find(".image-remove").click(function(){removeImage(b)});b.find(".js-post-image-cancel").click(function(){a(b)});b.find("*[type=submit]").click(function(){$(this).parents("form").find("*[type=submit]").removeAttr("clicked");$(this).attr("clicked","true")});b.validate({rules:{title:{required:true,maxlength:255},url:{maxlength:2000},}});initializeDatePicker(b)}function expandPostImage(){if(!post_image_init){initliazePostImageForm($(".post-image form"),cleanPostImageForm);post_image_init=true}$(".post-image").removeClass("hidden");$(".iconbutton.image").addClass("active")}function cleanPostImageForm(a){if(typeof(a)=="undefined"){a=$(".post-image form")}clearForm(a)}function removeImage(a){if(typeof(a)=="undefined"){a=$(".post-image form")}a.find("input[name=url]").val("").change()}function initliazePostVideoForm(b,a){var d=b.find("textarea");d.attr("id",d.attr("id")+Date.now());inicializeEditor(d.attr("id"));var c=b.find("input[name=tags]");c.tagsInput(tagsInputOptions);c.importTags(c.val());if(typeof(initliazePostVideoFormPremium)=="function"){initliazePostVideoFormPremium(b)}b.find("input[name=url]").on("change keyup paste",function(g){var e=$(this).val();if(e!=last_video_url){var f=getEmbeddedPlayer(e,500,300);if(f){b.find(".video-preview").html(f).removeClass("hidden")}else{b.find(".video-preview").addClass("hidden").html("")}}last_video_url=e});if(b.find("input[name=url]").val()!=""){last_video_url="";b.find("input[name=url]").change()}b.find(".js-post-video-cancel").click(function(){a(b)});b.find("*[type=submit]").click(function(){$(this).parents("form").find("*[type=submit]").removeAttr("clicked");$(this).attr("clicked","true")});b.validate({rules:{title:{required:true,maxlength:255},url:{maxlength:2000},}});initializeDatePicker(b)}function expandPostVideo(){if(!post_video_init){initliazePostVideoForm($(".post-video form"),cleanPostVideoForm);post_video_init=true}$(".post-video").removeClass("hidden");$(".iconbutton.video").addClass("active")}function cleanPostVideoForm(a){if(typeof(a)=="undefined"){a=$(".post-video form")}clearForm(a)}function initliazePostLinkForm(b,a){var d=b.find("textarea");d.attr("id",d.attr("id")+Date.now());inicializeEditor(d.attr("id"));var c=b.find("input[name=tags]");c.tagsInput(tagsInputOptions);c.importTags(c.val());if(typeof(initliazePostLinkFormPremium)=="function"){initliazePostLinkFormPremium(b)}b.find(".js-post-link-cancel").click(function(){a(b)});b.find("*[type=submit]").click(function(){$(this).parents("form").find("*[type=submit]").removeAttr("clicked");$(this).attr("clicked","true")});b.validate({rules:{title:{required:true,maxlength:255},url:{maxlength:2000},}});initializeDatePicker(b)}function expandPostLink(){if(!post_link_init){initliazePostLinkForm($(".post-link form"),cleanPostLinkForm);post_link_init=true}$(".post-link").removeClass("hidden");$(".iconbutton.link").addClass("active")}function cleanPostLinkForm(a){if(typeof(a)=="undefined"){a=$(".post-link form")}clearForm(a)}function initializeManagePosts(a){a.find(".write-a-post").click(function(b){b.preventDefault();$(".post-area").prev().click();return false});a.find(".change_publish").on("click",function(c){c.preventDefault();var b=$(this);b.loader("show");$.get($(this).attr("href"),{ajax:true},function(d){b.loader("hide");d=$.parseJSON(d);if(d.published){b.removeClass("checked")}else{b.addClass("checked")}b.attr("href",d.url);Wix.Settings.refreshApp()})});a.find(".edit").click(function(d){d.preventDefault();$(this).loader("show");var b=$("<div></div>");var c=$(this).parents(".tile");c.append(b);b.load($(this).attr("href"),{ajax:"true"},function(){var e=$(this).find("form").css({visibility:"hidden",opacity:0});var f=e.attr("class");f=f.charAt(0).toUpperCase()+f.substring(1);if(typeof(window["initliazePost"+f+"Form"])=="function"){window["initliazePost"+f+"Form"](e,function(g){g.animate({opacity:0},"normal",function(){c.animate({height:38},"normal",function(){c.find("*").css("max-height","");c.find(".manage-buttons").removeClass("hidden");g.remove()});c.find(".date").animate({right:190},"normal")})});e.submit(function(){if(e.valid()){var h=e.find("*[name=content]");var g=new Settings();h.val(CKEDITOR.instances[h.attr("id")].getData());g.submitForm($(this),function(i){e.animate({opacity:0},"normal",function(){c.animate({height:38},"normal",function(){c.find("*").css("max-height","");c.find(".manage-buttons").removeClass("hidden")});c.find("h3").text(e.find("input[name=title]").val());c.find("p.date").text($.datepicker.formatDate("yy-mm-dd",new Date(e.find("input[name=postdate]").val())));e.remove();c.find(".date").animate({right:190},"normal")})})}return false});c.find(".manage-buttons").addClass("hidden");c.find("*").css("max-height","100%");$(this).loader("hide");c.animate({height:e.outerHeight()+38},"normal",function(){c.css("height","auto");e.css("visibility","").animate({opacity:1},"normal");e.find("input[type=text]").first().focus()});c.find(".date").animate({right:0},"normal")}else{$(this).loader("hide",{message:""})}});return false});a.find(".delete").inlineConfirmation({text:__delete_question,confirm:__delete_confirmation,cancel:__delete_cancelation,hideOriginalAction:false,confirmCallback:deletePost});a.find(".js-more-posts").click(function(){event.preventDefault();var c=$(this);var b=c.closest(".tile");var d=c.closest("#recent-posts");c.loader("show");$.get(c.attr("href"),{ajax:true},function(e){d.append(initializeManagePosts($(e)));c.loader("hide");b.remove()});return false});return a}function deletePost(){$(this).loader("show");var a=$(this).closest(".tile");$.get(a.find(".delete").attr("href"),{ajax:true},function(){a.animate({opacity:0,height:0},"normal",function(){a.remove()})});Wix.Settings.refreshApp()}function inicializeEditor(b){var a=CKEDITOR.replace(b);a.once("contentDom",function(d){for(var c=0;c<fonts.length;c++){if((fonts[c]!=null)||(fonts[c]!="")){d.editor.document.appendStyleSheet(fonts[c])}}})}function initializeDatePicker(a){if((a.find("[name=postdate]").val()+"")==""){a.find("[name=postdate]").appendDtpicker({locale:"en",minuteInterval:15,})}else{a.find("[name=postdate]").appendDtpicker({locale:"en",minuteInterval:15,current:a.find("[name=postdate]").val()+"",})}};